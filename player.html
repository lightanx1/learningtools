<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <style>
      body, html { margin: 0; padding: 0; height: 100%; background-color: #000000; overflow: hidden; }
      #player { width: 100%; height: 100%; }
    </style>
  </head>
  <body>
    <div id="player"></div>

    <script>
      // 1. Get videoId from URL (e.g., player.html?videoId=jNQXAC9IVRw)
      const urlParams = new URLSearchParams(window.location.search);
      const videoId = urlParams.get('videoId');

      // 2. Load the IFrame Player API code asynchronously.
      var tag = document.createElement('script');
      tag.src = "https://www.youtube.com/iframe_api";
      var firstScriptTag = document.getElementsByTagName('script')[0];
      firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

      // 3. Create an <iframe> (and YouTube player) after the API code downloads.
      var player;
      function onYouTubeIframeAPIReady() {
        if (videoId) {
          player = new YT.Player('player', {
            height: '100%',
            width: '100%',
            videoId: videoId,
            playerVars: {
              'playsinline': 1,
              'rel': 0,
              'modestbranding': 1,
              'fs': 0,
              // 'origin': 'https://your-supabase-url.com' // Optional security later
            },
            events: {
              'onReady': onPlayerReady
            }
          });
        }
      }

      function onPlayerReady(event) {
        // Ready to play!
        // In the future, we will send a message to the App here.
      }
    </script>
  </body>
</html>
